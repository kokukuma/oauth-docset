<!DOCTYPE html>
<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html --><html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<title>
  
    draft-ietf-oauth-json-web-token-32
  
</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>
<!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.38.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.38.0/respond/dest/respond.min.js"></script>
    <![endif]-->
<link href="/feed/document-changes/draft-ietf-oauth-json-web-token/" rel="alternate" title="Document changes" type="application/atom+xml"/>
<meta content="JSON Web Token (JWT) (Internet-Draft, 2014)" name="description"/>
<script src="https://www.ietf.org/lib/dt/7.38.0/d3/d3.min.js"></script>
<script src="https://www.ietf.org/lib/dt/7.38.0/jquery/jquery.min.js"></script>
<link href="https://www.ietf.org/lib/dt/7.38.0/ietf/images/ietf-icon-blue3.png" rel="shortcut icon"/>
<link href="https://www.ietf.org/lib/dt/7.38.0/ietf/images/apple-touch-icon.png" rel="apple-touch-icon"/>
</head>
<body style="padding-top: 0;">
<div class="content" id="content">
<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
<div class="rfcmarkup">
<div class="noprint" style="height: 6px;">
<div class="meta-info bgred" onclick="showLegend();" onmouseout="hideLegend()" onmouseover="this.style.cursor='pointer';" style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; " title="Click for colour legend."> </div>
<div class="meta-info noprint pre legend" id="legend" onmouseout="hideLegend();" onmouseover="showLegend();" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
</div>
</div>
<div class="noprint">
<pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.ietf.org/archive/id/draft-ietf-oauth-json-web-token-32.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.ietf.org/archive/id/draft-ietf-oauth-json-web-token-32.xml" title="XML source for this document">xml</a>|<a href="https://tools.ietf.org/pdf/draft-ietf-oauth-json-web-token-32.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/draft-ietf-oauth-json-web-token/32/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/draft-ietf-oauth-json-web-token/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/oauth/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-oauth-json-web-token@ietf.org?subject=draft-ietf-oauth-json-web-token" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=draft-ietf-oauth-json-web-token-32.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-oauth-json-web-token-32.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-oauth-json-web-token-32.txt" title="Run an idnits check of this document">Nits</a>]

Versions: (<a href="/doc/html/draft-jones-json-web-token">draft-jones-json-web-token</a>)  <a href="/doc/html/draft-ietf-oauth-json-web-token-00">00</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-01">01</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-02">02</a>         Standards Track
          <a href="/doc/html/draft-ietf-oauth-json-web-token-03">03</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-04">04</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-05">05</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-06">06</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-07">07</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-08">08</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-09">09</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-10">10</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-11">11</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-12">12</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-13">13</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-14">14</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-15">15</a>        <a class="text-warning" href="/ipr/search/?submit=draft&amp;id=draft-ietf-oauth-json-web-token">IPR declarations</a>
          <a href="/doc/html/draft-ietf-oauth-json-web-token-16">16</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-17">17</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-18">18</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-19">19</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-20">20</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-21">21</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-22">22</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-23">23</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-24">24</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-25">25</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-26">26</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-27">27</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-28">28</a>                        
          <a href="/doc/html/draft-ietf-oauth-json-web-token-29">29</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-30">30</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-31">31</a> <a href="/doc/html/draft-ietf-oauth-json-web-token-32"><b>32</b></a> <a href="/doc/html/rfc7519">rfc7519</a>                                           </pre>
</div>
<div class="draftcontent">
<pre>OAuth Working Group                                             M. Jones
Internet-Draft                                                 Microsoft
Intended status: Standards Track                              J. Bradley
Expires: June 12, 2015                                     Ping Identity
                                                             N. Sakimura
                                                                     NRI
                                                        December 9, 2014


                          <span class="h1">JSON Web Token (JWT)</span>
                   <span class="h1">draft-ietf-oauth-json-web-token-32</span>

Abstract

   JSON Web Token (JWT) is a compact, URL-safe means of representing
   claims to be transferred between two parties.  The claims in a JWT
   are encoded as a JavaScript Object Notation (JSON) object that is
   used as the payload of a JSON Web Signature (JWS) structure or as the
   plaintext of a JSON Web Encryption (JWE) structure, enabling the
   claims to be digitally signed or MACed and/or encrypted.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of <a href="/doc/html/bcp78">BCP 78</a> and <a href="/doc/html/bcp79">BCP 79</a>.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on June 12, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.1">1.1</a>.  Notational Conventions . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  JSON Web Token (JWT) Overview  . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-3.1">3.1</a>.  Example JWT  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
   <a href="#section-4">4</a>.  JWT Claims . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-4.1">4.1</a>.  Registered Claim Names . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-4.1.1">4.1.1</a>.  "iss" (Issuer) Claim . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-4.1.2">4.1.2</a>.  "sub" (Subject) Claim  . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-4.1.3">4.1.3</a>.  "aud" (Audience) Claim . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-4.1.4">4.1.4</a>.  "exp" (Expiration Time) Claim  . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-4.1.5">4.1.5</a>.  "nbf" (Not Before) Claim . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-4.1.6">4.1.6</a>.  "iat" (Issued At) Claim  . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-4.1.7">4.1.7</a>.  "jti" (JWT ID) Claim . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-4.2">4.2</a>.  Public Claim Names . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-4.3">4.3</a>.  Private Claim Names  . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-5">5</a>.  JOSE Header  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.1">5.1</a>.  "typ" (Type) Header Parameter  . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-5.2">5.2</a>.  "cty" (Content Type) Header Parameter  . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-5.3">5.3</a>.  Replicating Claims as Header Parameters  . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-6">6</a>.  Unsecured JWTs . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-6.1">6.1</a>.  Example Unsecured JWT  . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-7">7</a>.  Creating and Validating JWTs . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-7.1">7.1</a>.  Creating a JWT . . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-7.2">7.2</a>.  Validating a JWT . . . . . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-7.3">7.3</a>.  String Comparison Rules  . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
   <a href="#section-8">8</a>.  Implementation Requirements  . . . . . . . . . . . . . . . . . <a href="#page-16">16</a>
   <a href="#section-9">9</a>.  URI for Declaring that Content is a JWT  . . . . . . . . . . . <a href="#page-16">16</a>
   <a href="#section-10">10</a>. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-16">16</a>
     <a href="#section-10.1">10.1</a>. JSON Web Token Claims Registry . . . . . . . . . . . . . . <a href="#page-16">16</a>
       <a href="#section-10.1.1">10.1.1</a>. Registration Template  . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
       <a href="#section-10.1.2">10.1.2</a>. Initial Registry Contents  . . . . . . . . . . . . . . <a href="#page-18">18</a>
     10.2. Sub-Namespace Registration of
           urn:ietf:params:oauth:token-type:jwt . . . . . . . . . . . <a href="#page-19">19</a>
       <a href="#section-10.2.1">10.2.1</a>. Registry Contents  . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-10.3">10.3</a>. Media Type Registration  . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
       <a href="#section-10.3.1">10.3.1</a>. Registry Contents  . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-10.4">10.4</a>. Header Parameter Names Registration  . . . . . . . . . . . <a href="#page-20">20</a>
       <a href="#section-10.4.1">10.4.1</a>. Registry Contents  . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
   <a href="#section-11">11</a>. Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


     <a href="#section-11.1">11.1</a>. Trust Decisions  . . . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>
     <a href="#section-11.2">11.2</a>. Signing and Encryption Order . . . . . . . . . . . . . . . <a href="#page-21">21</a>
   <a href="#section-12">12</a>. Privacy Considerations . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
   <a href="#section-13">13</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-13.1">13.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-13.2">13.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
   <a href="#appendix-A">Appendix A</a>.  JWT Examples  . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#appendix-A.1">A.1</a>.  Example Encrypted JWT  . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#appendix-A.2">A.2</a>.  Example Nested JWT . . . . . . . . . . . . . . . . . . . . <a href="#page-25">25</a>
   <a href="#appendix-B">Appendix B</a>.  Relationship of JWTs to SAML Assertions . . . . . . . <a href="#page-26">26</a>
   <a href="#appendix-C">Appendix C</a>.  Relationship of JWTs to Simple Web Tokens (SWTs)  . . <a href="#page-27">27</a>
   <a href="#appendix-D">Appendix D</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>
   <a href="#appendix-E">Appendix E</a>.  Document History  . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-34">34</a>





































<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/1.%20%20Introduction"></a></body></html><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   JSON Web Token (JWT) is a compact claims representation format
   intended for space constrained environments such as HTTP
   Authorization headers and URI query parameters.  JWTs encode claims
   to be transmitted as a JavaScript Object Notation (JSON) [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>]
   object that is used as the payload of a JSON Web Signature (JWS)
   [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] structure or as the plaintext of a JSON Web Encryption (JWE)
   [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>] structure, enabling the claims to be digitally signed or MACed
   and/or encrypted.  JWTs are always represented using the JWS Compact
   Serialization or the JWE Compact Serialization.

   The suggested pronunciation of JWT is the same as the English word
   "jot".

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/1.1.%20%20Notational%20Conventions"></a></body></html><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Notational Conventions</span>

   The key words "<em>MUST</em>", "<em>MUST NOT</em>", "<em>REQUIRED</em>", "<em>SHALL</em>", "<em>SHALL NOT</em>",
   "<em>SHOULD</em>", "<em>SHOULD NOT</em>", "<em>RECOMMENDED</em>", "NOT <em>RECOMMENDED</em>", "<em>MAY</em>", and
   "<em>OPTIONAL</em>" in this document are to be interpreted as described in Key
   words for use in RFCs to Indicate Requirement Levels [<a href="/doc/html/rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].  If
   these words are used without being spelled in uppercase then they are
   to be interpreted with their normal natural language meanings.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/2.%20%20Terminology"></a></body></html><a class="selflink" href="#section-2" id="section-2">2</a>.  Terminology</span>

   These terms defined by the JSON Web Signature (JWS) [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>]
   specification are incorporated into this specification: "JSON Web
   Signature (JWS)", "Base64url Encoding", "Header Parameter", "JOSE
   Header", "JWS Compact Serialization", "JWS Payload", "JWS Signature",
   and "Unsecured JWS".

   These terms defined by the JSON Web Encryption (JWE) [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>]
   specification are incorporated into this specification: "JSON Web
   Encryption (JWE)", "Content Encryption Key (CEK)", "JWE Compact
   Serialization", "JWE Encrypted Key", "JWE Initialization Vector", and
   "JWE Plaintext".

   These terms defined by the Internet Security Glossary, Version 2
   [<a href="/doc/html/rfc4949" title='"Internet Security Glossary, Version 2"'>RFC4949</a>] are incorporated into this specification: "Ciphertext",
   "Digital Signature" "Message Authentication Code (MAC)", and
   "Plaintext".

   These terms are defined by this specification:






<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   JSON Web Token (JWT)
      A string representing a set of claims as a JSON object that is
      encoded in a JWS or JWE, enabling the claims to be digitally
      signed or MACed and/or encrypted.

   JWT Claims Set
      A JSON object that contains the Claims conveyed by the JWT.

   Claim
      A piece of information asserted about a subject.  A Claim is
      represented as a name/value pair consisting of a Claim Name and a
      Claim Value.

   Claim Name
      The name portion of a Claim representation.  A Claim Name is
      always a string.

   Claim Value
      The value portion of a Claim representation.  A Claim Value can be
      any JSON value.

   Encoded JOSE Header
      Base64url encoding of the JOSE Header.

   Nested JWT
      A JWT in which nested signing and/or encryption are employed.  In
      nested JWTs, a JWT is used as the payload or plaintext value of an
      enclosing JWS or JWE structure, respectively.

   Unsecured JWT
      A JWT whose Claims are not integrity protected or encrypted.

   Collision-Resistant Name
      A name in a namespace that enables names to be allocated in a
      manner such that they are highly unlikely to collide with other
      names.  Examples of collision-resistant namespaces include: Domain
      Names, Object Identifiers (OIDs) as defined in the ITU-T X.660 and
      X.670 Recommendation series, and Universally Unique IDentifiers
      (UUIDs) [<a href="/doc/html/rfc4122" title='"A Universally Unique IDentifier (UUID) URN Namespace"'>RFC4122</a>].  When using an administratively delegated
      namespace, the definer of a name needs to take reasonable
      precautions to ensure they are in control of the portion of the
      namespace they use to define the name.

   StringOrURI
      A JSON string value, with the additional requirement that while
      arbitrary string values <em>MAY</em> be used, any value containing a ":"
      character <em>MUST</em> be a URI [<a href="/doc/html/rfc3986" title="and L. Masinter">RFC3986</a>].  StringOrURI values are
      compared as case-sensitive strings with no transformations or



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


      canonicalizations applied.

   NumericDate
      A JSON numeric value representing the number of seconds from 1970-
      01-01T00:00:00Z UTC until the specified UTC date/time, ignoring
      leap seconds.  This is equivalent to the IEEE Std 1003.1, 2013
      Edition [<a href="#ref-POSIX.1" title='"The Open Group Base Specifications Issue 7"'>POSIX.1</a>] definition "Seconds Since the Epoch", in which
      each day is accounted for by exactly 86400 seconds, other than
      that non-integer values can be represented.  See <a href="/doc/html/rfc3339">RFC 3339</a>
      [<a href="/doc/html/rfc3339" title='"Date and Time on the Internet: Timestamps"'>RFC3339</a>] for details regarding date/times in general and UTC in
      particular.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/3.%20%20JSON%20Web%20Token%20%28JWT%29%20Overview"></a></body></html><a class="selflink" href="#section-3" id="section-3">3</a>.  JSON Web Token (JWT) Overview</span>

   JWTs represent a set of claims as a JSON object that is encoded in a
   JWS and/or JWE structure.  This JSON object is the JWT Claims Set. As
   per <a href="/doc/html/rfc7159#section-4">Section 4 of RFC 7159</a> [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>], the JSON object consists of zero
   or more name/value pairs (or members), where the names are strings
   and the values are arbitrary JSON values.  These members are the
   claims represented by the JWT.  This JSON object <em>MAY</em> contain white
   space and/or line breaks before or after any JSON values or
   structural characters, in accordance with <a href="/doc/html/rfc7159#section-2">Section 2 of RFC 7159</a>
   [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>].

   The member names within the JWT Claims Set are referred to as Claim
   Names.  The corresponding values are referred to as Claim Values.

   The contents of the JOSE Header describe the cryptographic operations
   applied to the JWT Claims Set. If the JOSE Header is for a JWS, the
   JWT is represented as a JWS and the claims are digitally signed or
   MACed, with the JWT Claims Set being the JWS Payload.  If the JOSE
   Header is for a JWE, the JWT is represented as a JWE and the claims
   are encrypted, with the JWT Claims Set being the JWE Plaintext.  A
   JWT may be enclosed in another JWE or JWS structure to create a
   Nested JWT, enabling nested signing and encryption to be performed.

   A JWT is represented as a sequence of URL-safe parts separated by
   period ('.') characters.  Each part contains a base64url encoded
   value.  The number of parts in the JWT is dependent upon the
   representation of the resulting JWS using the JWS Compact
   Serialization or JWE using the JWE Compact Serialization.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/3.1.%20%20Example%20JWT"></a></body></html><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Example JWT</span>

   The following example JOSE Header declares that the encoded object is
   a JSON Web Token (JWT) and the JWT is a JWS that is MACed using the
   HMAC SHA-256 algorithm:



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


     {"typ":"JWT",
      "alg":"HS256"}

   To remove potential ambiguities in the representation of the JSON
   object above, the octet sequence for the actual UTF-8 representation
   used in this example for the JOSE Header above is also included
   below.  (Note that ambiguities can arise due to differing platform
   representations of line breaks (CRLF versus LF), differing spacing at
   the beginning and ends of lines, whether the last line has a
   terminating line break or not, and other causes.  In the
   representation used in this example, the first line has no leading or
   trailing spaces, a CRLF line break (13, 10) occurs between the first
   and second lines, the second line has one leading space (32) and no
   trailing spaces, and the last line does not have a terminating line
   break.)  The octets representing the UTF-8 representation of the JOSE
   Header in this example (using JSON array notation) are:

   [123, 34, 116, 121, 112, 34, 58, 34, 74, 87, 84, 34, 44, 13, 10, 32,
   34, 97, 108, 103, 34, 58, 34, 72, 83, 50, 53, 54, 34, 125]

   Base64url encoding the octets of the UTF-8 representation of the JOSE
   Header yields this Encoded JOSE Header value:

     eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9

   The following is an example of a JWT Claims Set:

     {"iss":"joe",
      "exp":1300819380,
      "http://example.com/is_root":true}

   The following octet sequence, which is the UTF-8 representation used
   in this example for the JWT Claims Set above, is the JWS Payload:

   [123, 34, 105, 115, 115, 34, 58, 34, 106, 111, 101, 34, 44, 13, 10,
   32, 34, 101, 120, 112, 34, 58, 49, 51, 48, 48, 56, 49, 57, 51, 56,
   48, 44, 13, 10, 32, 34, 104, 116, 116, 112, 58, 47, 47, 101, 120, 97,
   109, 112, 108, 101, 46, 99, 111, 109, 47, 105, 115, 95, 114, 111,
   111, 116, 34, 58, 116, 114, 117, 101, 125]

   Base64url encoding the JWS Payload yields this encoded JWS Payload
   (with line breaks for display purposes only):

     eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly
     9leGFtcGxlLmNvbS9pc19yb290Ijp0cnVlfQ

   Computing the MAC of the encoded JOSE Header and encoded JWS Payload
   with the HMAC SHA-256 algorithm and base64url encoding the HMAC value



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   in the manner specified in [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>], yields this encoded JWS Signature:

     dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk

   Concatenating these encoded parts in this order with period ('.')
   characters between the parts yields this complete JWT (with line
   breaks for display purposes only):

     eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
     .
     eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
     cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
     .
     dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk

   This computation is illustrated in more detail in <a href="#appendix-A.1">Appendix A.1</a> of
   [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>].  See <a href="#appendix-A.1">Appendix A.1</a> for an example of an encrypted JWT.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.%20%20JWT%20Claims"></a></body></html><a class="selflink" href="#section-4" id="section-4">4</a>.  JWT Claims</span>

   The JWT Claims Set represents a JSON object whose members are the
   claims conveyed by the JWT.  The Claim Names within a JWT Claims Set
   <em>MUST</em> be unique; JWT parsers <em>MUST</em> either reject JWTs with duplicate
   Claim Names or use a JSON parser that returns only the lexically last
   duplicate member name, as specified in <a href="#section-15.12">Section 15.12</a> (The JSON
   Object) of ECMAScript 5.1 [<a href="#ref-ECMAScript">ECMAScript</a>].

   The set of claims that a JWT must contain to be considered valid is
   context-dependent and is outside the scope of this specification.
   Specific applications of JWTs will require implementations to
   understand and process some claims in particular ways.  However, in
   the absence of such requirements, all claims that are not understood
   by implementations <em>MUST</em> be ignored.

   There are three classes of JWT Claim Names: Registered Claim Names,
   Public Claim Names, and Private Claim Names.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.%20%20Registered%20Claim%20Names"></a></body></html><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Registered Claim Names</span>

   The following Claim Names are registered in the IANA JSON Web Token
   Claims registry defined in <a href="#section-10.1">Section 10.1</a>.  None of the claims defined
   below are intended to be mandatory to use or implement in all cases,
   but rather, provide a starting point for a set of useful,
   interoperable claims.  Applications using JWTs should define which
   specific claims they use and when they are required or optional.  All
   the names are short because a core goal of JWTs is for the
   representation to be compact.



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.1.%20%20%22iss%22%20%28Issuer%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.1" id="section-4.1.1">4.1.1</a>.  "iss" (Issuer) Claim</span>

   The "iss" (issuer) claim identifies the principal that issued the
   JWT.  The processing of this claim is generally application specific.
   The "iss" value is a case-sensitive string containing a StringOrURI
   value.  Use of this claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.2.%20%20%22sub%22%20%28Subject%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.2" id="section-4.1.2">4.1.2</a>.  "sub" (Subject) Claim</span>

   The "sub" (subject) claim identifies the principal that is the
   subject of the JWT.  The Claims in a JWT are normally statements
   about the subject.  The subject value <em>MUST</em> either be scoped to be
   locally unique in the context of the issuer or be globally unique.
   The processing of this claim is generally application specific.  The
   "sub" value is a case-sensitive string containing a StringOrURI
   value.  Use of this claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.3.%20%20%22aud%22%20%28Audience%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.3" id="section-4.1.3">4.1.3</a>.  "aud" (Audience) Claim</span>

   The "aud" (audience) claim identifies the recipients that the JWT is
   intended for.  Each principal intended to process the JWT <em>MUST</em>
   identify itself with a value in the audience claim.  If the principal
   processing the claim does not identify itself with a value in the
   "aud" claim when this claim is present, then the JWT <em>MUST</em> be
   rejected.  In the general case, the "aud" value is an array of case-
   sensitive strings, each containing a StringOrURI value.  In the
   special case when the JWT has one audience, the "aud" value <em>MAY</em> be a
   single case-sensitive string containing a StringOrURI value.  The
   interpretation of audience values is generally application specific.
   Use of this claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.4.%20%20%22exp%22%20%28Expiration%20Time%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.4" id="section-4.1.4">4.1.4</a>.  "exp" (Expiration Time) Claim</span>

   The "exp" (expiration time) claim identifies the expiration time on
   or after which the JWT <em>MUST NOT</em> be accepted for processing.  The
   processing of the "exp" claim requires that the current date/time
   <em>MUST</em> be before the expiration date/time listed in the "exp" claim.
   Implementers <em>MAY</em> provide for some small leeway, usually no more than
   a few minutes, to account for clock skew.  Its value <em>MUST</em> be a number
   containing a NumericDate value.  Use of this claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.5.%20%20%22nbf%22%20%28Not%20Before%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.5" id="section-4.1.5">4.1.5</a>.  "nbf" (Not Before) Claim</span>

   The "nbf" (not before) claim identifies the time before which the JWT
   <em>MUST NOT</em> be accepted for processing.  The processing of the "nbf"
   claim requires that the current date/time <em>MUST</em> be after or equal to
   the not-before date/time listed in the "nbf" claim.  Implementers <em>MAY</em>
   provide for some small leeway, usually no more than a few minutes, to



<span class="grey">Jones, et al.             Expires June 12, 2015                 [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   account for clock skew.  Its value <em>MUST</em> be a number containing a
   NumericDate value.  Use of this claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.6.%20%20%22iat%22%20%28Issued%20At%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.6" id="section-4.1.6">4.1.6</a>.  "iat" (Issued At) Claim</span>

   The "iat" (issued at) claim identifies the time at which the JWT was
   issued.  This claim can be used to determine the age of the JWT.  Its
   value <em>MUST</em> be a number containing a NumericDate value.  Use of this
   claim is <em>OPTIONAL</em>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.1.7.%20%20%22jti%22%20%28JWT%20ID%29%20Claim"></a></body></html><a class="selflink" href="#section-4.1.7" id="section-4.1.7">4.1.7</a>.  "jti" (JWT ID) Claim</span>

   The "jti" (JWT ID) claim provides a unique identifier for the JWT.
   The identifier value <em>MUST</em> be assigned in a manner that ensures that
   there is a negligible probability that the same value will be
   accidentally assigned to a different data object; if the application
   uses multiple issuers, collisions <em>MUST</em> be prevented among values
   produced by different issuers as well.  The "jti" claim can be used
   to prevent the JWT from being replayed.  The "jti" value is a case-
   sensitive string.  Use of this claim is <em>OPTIONAL</em>.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.2.%20%20Public%20Claim%20Names"></a></body></html><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Public Claim Names</span>

   Claim Names can be defined at will by those using JWTs.  However, in
   order to prevent collisions, any new Claim Name should either be
   registered in the IANA JSON Web Token Claims registry defined in
   <a href="#section-10.1">Section 10.1</a> or be a Public Name: a value that contains a Collision-
   Resistant Name.  In each case, the definer of the name or value needs
   to take reasonable precautions to make sure they are in control of
   the part of the namespace they use to define the Claim Name.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/4.3.%20%20Private%20Claim%20Names"></a></body></html><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Private Claim Names</span>

   A producer and consumer of a JWT <em>MAY</em> agree to use Claim Names that
   are Private Names: names that are not Registered Claim Names
   <a href="#section-4.1">Section 4.1</a> or Public Claim Names <a href="#section-4.2">Section 4.2</a>.  Unlike Public Claim
   Names, Private Claim Names are subject to collision and should be
   used with caution.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/5.%20%20JOSE%20Header"></a></body></html><a class="selflink" href="#section-5" id="section-5">5</a>.  JOSE Header</span>

   For a JWT object, the members of the JSON object represented by the
   JOSE Header describe the cryptographic operations applied to the JWT
   and optionally, additional properties of the JWT.  Depending upon
   whether the JWT is a JWS or JWE, the corresponding rules for the JOSE
   Header values apply.




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   This specification further specifies the use of the following Header
   Parameters in both the cases where the JWT is a JWS and where it is a
   JWE.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/5.1.%20%20%22typ%22%20%28Type%29%20Header%20Parameter"></a></body></html><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  "typ" (Type) Header Parameter</span>

   The "typ" (type) Header Parameter defined by [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] and [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>] is used
   by JWT applications to declare the MIME Media Type [<a href="#ref-IANA.MediaTypes">IANA.MediaTypes</a>]
   of this complete JWT.  This is intended for use by the JWT
   application when values that are not JWTs could also be present in an
   application data structure that can contain a JWT object; the
   application can use this value to disambiguate among the different
   kinds of objects that might be present.  It will typically not be
   used by applications when it is already known that the object is a
   JWT.  This parameter is ignored by JWT implementations; any
   processing of this parameter is performed by the JWT application.  If
   present, it is <em>RECOMMENDED</em> that its value be "JWT" to indicate that
   this object is a JWT.  While media type names are not case-sensitive,
   it is <em>RECOMMENDED</em> that "JWT" always be spelled using uppercase
   characters for compatibility with legacy implementations.  Use of
   this Header Parameter is <em>OPTIONAL</em>.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/5.2.%20%20%22cty%22%20%28Content%20Type%29%20Header%20Parameter"></a></body></html><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  "cty" (Content Type) Header Parameter</span>

   The "cty" (content type) Header Parameter defined by [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] and [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>]
   is used by this specification to convey structural information about
   the JWT.

   In the normal case in which nested signing or encryption operations
   are not employed, the use of this Header Parameter is NOT
   <em>RECOMMENDED</em>.  In the case that nested signing or encryption is
   employed, this Header Parameter <em>MUST</em> be present; in this case, the
   value <em>MUST</em> be "JWT", to indicate that a Nested JWT is carried in this
   JWT.  While media type names are not case-sensitive, it is
   <em>RECOMMENDED</em> that "JWT" always be spelled using uppercase characters
   for compatibility with legacy implementations.  See <a href="#appendix-A.2">Appendix A.2</a> for
   an example of a Nested JWT.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/5.3.%20%20Replicating%20Claims%20as%20Header%20Parameters"></a></body></html><a class="selflink" href="#section-5.3" id="section-5.3">5.3</a>.  Replicating Claims as Header Parameters</span>

   In some applications using encrypted JWTs, it is useful to have an
   unencrypted representation of some Claims.  This might be used, for
   instance, in application processing rules to determine whether and
   how to process the JWT before it is decrypted.

   This specification allows Claims present in the JWT Claims Set to be
   replicated as Header Parameters in a JWT that is a JWE, as needed by
   the application.  If such replicated Claims are present, the



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   application receiving them <em>SHOULD</em> verify that their values are
   identical, unless the application defines other specific processing
   rules for these Claims.  It is the responsibility of the application
   to ensure that only claims that are safe to be transmitted in an
   unencrypted manner are replicated as Header Parameter values in the
   JWT.

   <a href="#section-10.4.1">Section 10.4.1</a> of this specification registers the "iss" (issuer),
   "sub" (subject), and "aud" (audience) Header Parameter names for the
   purpose of providing unencrypted replicas of these Claims in
   encrypted JWTs for applications that need them.  Other specifications
   <em>MAY</em> similarly register other names that are registered Claim Names as
   Header Parameter names, as needed.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/6.%20%20Unsecured%20JWTs"></a></body></html><a class="selflink" href="#section-6" id="section-6">6</a>.  Unsecured JWTs</span>

   To support use cases in which the JWT content is secured by a means
   other than a signature and/or encryption contained within the JWT
   (such as a signature on a data structure containing the JWT), JWTs
   <em>MAY</em> also be created without a signature or encryption.  An Unsecured
   JWT is a JWS using the "alg" Header Parameter value "none" and with
   the empty string for its JWS Signature value, as defined in JSON Web
   Algorithms (JWA) [<a href="#ref-JWA" title='"JSON Web Algorithms (JWA)"'>JWA</a>]; it is an Unsecured JWS with the JWT Claims
   Set as its JWS Payload.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/6.1.%20%20Example%20Unsecured%20JWT"></a></body></html><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Example Unsecured JWT</span>

   The following example JOSE Header declares that the encoded object is
   an Unsecured JWT:

     {"alg":"none"}

   Base64url encoding the octets of the UTF-8 representation of the JOSE
   Header yields this Encoded JOSE Header:

     eyJhbGciOiJub25lIn0

   The following is an example of a JWT Claims Set:

     {"iss":"joe",
      "exp":1300819380,
      "http://example.com/is_root":true}

   Base64url encoding the octets of the UTF-8 representation of the JWT
   Claims Set yields this encoded JWS Payload (with line breaks for
   display purposes only):




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


     eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
     cGxlLmNvbS9pc19yb290Ijp0cnVlfQ

   The encoded JWS Signature is the empty string.

   Concatenating these encoded parts in this order with period ('.')
   characters between the parts yields this complete JWT (with line
   breaks for display purposes only):

     eyJhbGciOiJub25lIn0
     .
     eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
     cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
     .


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/7.%20%20Creating%20and%20Validating%20JWTs"></a></body></html><a class="selflink" href="#section-7" id="section-7">7</a>.  Creating and Validating JWTs</span>

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/7.1.%20%20Creating%20a%20JWT"></a></body></html><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  Creating a JWT</span>

   To create a JWT, the following steps are performed.  The order of the
   steps is not significant in cases where there are no dependencies
   between the inputs and outputs of the steps.

   1.  Create a JWT Claims Set containing the desired claims.  Note that
       white space is explicitly allowed in the representation and no
       canonicalization need be performed before encoding.

   2.  Let the Message be the octets of the UTF-8 representation of the
       JWT Claims Set.

   3.  Create a JOSE Header containing the desired set of Header
       Parameters.  The JWT <em>MUST</em> conform to either the [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] or [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>]
       specification.  Note that white space is explicitly allowed in
       the representation and no canonicalization need be performed
       before encoding.

   4.  Depending upon whether the JWT is a JWS or JWE, there are two
       cases:

       *  If the JWT is a JWS, create a JWS using the Message as the JWS
          Payload; all steps specified in [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] for creating a JWS <em>MUST</em>
          be followed.

       *  Else, if the JWT is a JWE, create a JWE using the Message as
          the JWE Plaintext; all steps specified in [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>] for creating a
          JWE <em>MUST</em> be followed.




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   5.  If a nested signing or encryption operation will be performed,
       let the Message be the JWS or JWE, and return to Step 3, using a
       "cty" (content type) value of "JWT" in the new JOSE Header
       created in that step.

   6.  Otherwise, let the resulting JWT be the JWS or JWE.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/7.2.%20%20Validating%20a%20JWT"></a></body></html><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  Validating a JWT</span>

   When validating a JWT, the following steps are performed.  The order
   of the steps is not significant in cases where there are no
   dependencies between the inputs and outputs of the steps.  If any of
   the listed steps fails then the JWT <em>MUST</em> be rejected -- treated by
   the application as an invalid input.

   1.   Verify that the JWT contains at least one period ('.')
        character.

   2.   Let the Encoded JOSE Header be the portion of the JWT before the
        first period ('.') character.

   3.   Base64url decode the Encoded JOSE Header following the
        restriction that no line breaks, white space, or other
        additional characters have been used.

   4.   Verify that the resulting octet sequence is a UTF-8 encoded
        representation of a completely valid JSON object conforming to
        <a href="/doc/html/rfc7159">RFC 7159</a> [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>]; let the JOSE Header be this JSON object.

   5.   Verify that the resulting JOSE Header includes only parameters
        and values whose syntax and semantics are both understood and
        supported or that are specified as being ignored when not
        understood.

   6.   Determine whether the JWT is a JWS or a JWE using any of the
        methods described in Section 9 of [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>].

   7.   Depending upon whether the JWT is a JWS or JWE, there are two
        cases:

        *  If the JWT is a JWS, follow the steps specified in [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] for
           validating a JWS.  Let the Message be the result of base64url
           decoding the JWS Payload.

        *  Else, if the JWT is a JWE, follow the steps specified in
           [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>] for validating a JWE.  Let the Message be the JWE
           Plaintext.




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   8.   If the JOSE Header contains a "cty" (content type) value of
        "JWT", then the Message is a JWT that was the subject of nested
        signing or encryption operations.  In this case, return to Step
        1, using the Message as the JWT.

   9.   Otherwise, base64url decode the Message following the
        restriction that no line breaks, white space, or other
        additional characters have been used.

   10.  Verify that the resulting octet sequence is a UTF-8 encoded
        representation of a completely valid JSON object conforming to
        <a href="/doc/html/rfc7159">RFC 7159</a> [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>]; let the JWT Claims Set be this JSON object.

   Finally, note that it is an application decision which algorithms may
   be used in a given context.  Even if a JWT can be successfully
   validated, unless the algorithm(s) used in the JWT are acceptable to
   the application, it <em>SHOULD</em> reject the JWT.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/7.3.%20%20String%20Comparison%20Rules"></a></body></html><a class="selflink" href="#section-7.3" id="section-7.3">7.3</a>.  String Comparison Rules</span>

   Processing a JWT inevitably requires comparing known strings to
   members and values in JSON objects.  For example, in checking what
   the algorithm is, the Unicode string encoding "alg" will be checked
   against the member names in the JOSE Header to see if there is a
   matching Header Parameter name.

   The JSON rules for doing member name comparison are described in
   <a href="/doc/html/rfc7159#section-8.3">Section 8.3 of RFC 7159</a> [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>].  Since the only string comparison
   operations that are performed are equality and inequality, the same
   rules can be used for comparing both member names and member values
   against known strings.

   These comparison rules <em>MUST</em> be used for all JSON string comparisons
   except in cases where the definition of the member explicitly calls
   out that a different comparison rule is to be used for that member
   value.  In this specification, only the "typ" and "cty" member values
   do not use these comparison rules.

   Some applications may include case-insensitive information in a case-
   sensitive value, such as including a DNS name as part of the "iss"
   (issuer) claim value.  In those cases, the application may need to
   define a convention for the canonical case to use for representing
   the case-insensitive portions, such as lowercasing them, if more than
   one party might need to produce the same value so that they can be
   compared.  (However if all other parties consume whatever value the
   producing party emitted verbatim without attempting to compare it to
   an independently produced value, then the case used by the producer
   will not matter.)



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/8.%20%20Implementation%20Requirements"></a></body></html><a class="selflink" href="#section-8" id="section-8">8</a>.  Implementation Requirements</span>

   This section defines which algorithms and features of this
   specification are mandatory to implement.  Applications using this
   specification can impose additional requirements upon implementations
   that they use.  For instance, one application might require support
   for encrypted JWTs and Nested JWTs, while another might require
   support for signing JWTs with ECDSA using the P-256 curve and the
   SHA-256 hash algorithm ("ES256").

   Of the signature and MAC algorithms specified in JSON Web Algorithms
   (JWA) [<a href="#ref-JWA" title='"JSON Web Algorithms (JWA)"'>JWA</a>], only HMAC SHA-256 ("HS256") and "none" <em>MUST</em> be
   implemented by conforming JWT implementations.  It is <em>RECOMMENDED</em>
   that implementations also support RSASSA-PKCS1-V1_5 with the SHA-256
   hash algorithm ("RS256") and ECDSA using the P-256 curve and the SHA-
   256 hash algorithm ("ES256").  Support for other algorithms and key
   sizes is <em>OPTIONAL</em>.

   Support for encrypted JWTs is <em>OPTIONAL</em>.  If an implementation
   provides encryption capabilities, of the encryption algorithms
   specified in [<a href="#ref-JWA" title='"JSON Web Algorithms (JWA)"'>JWA</a>], only RSAES-PKCS1-V1_5 with 2048 bit keys
   ("RSA1_5"), AES Key Wrap with 128 and 256 bit keys ("A128KW" and
   "A256KW"), and the composite authenticated encryption algorithm using
   AES CBC and HMAC SHA-2 ("A128CBC-HS256" and "A256CBC-HS512") <em>MUST</em> be
   implemented by conforming implementations.  It is <em>RECOMMENDED</em> that
   implementations also support using ECDH-ES to agree upon a key used
   to wrap the Content Encryption Key ("ECDH-ES+A128KW" and
   "ECDH-ES+A256KW") and AES in Galois/Counter Mode (GCM) with 128 bit
   and 256 bit keys ("A128GCM" and "A256GCM").  Support for other
   algorithms and key sizes is <em>OPTIONAL</em>.

   Support for Nested JWTs is <em>OPTIONAL</em>.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/9.%20%20URI%20for%20Declaring%20that%20Content%20is%20a%20JWT"></a></body></html><a class="selflink" href="#section-9" id="section-9">9</a>.  URI for Declaring that Content is a JWT</span>

   This specification registers the URN
   "urn:ietf:params:oauth:token-type:jwt" for use by applications that
   declare content types using URIs (rather than, for instance, MIME
   Media Types) to indicate that the content referred to is a JWT.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.%20%20IANA%20Considerations"></a></body></html><a class="selflink" href="#section-10" id="section-10">10</a>.  IANA Considerations</span>

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.1.%20%20JSON%20Web%20Token%20Claims%20Registry"></a></body></html><a class="selflink" href="#section-10.1" id="section-10.1">10.1</a>.  JSON Web Token Claims Registry</span>

   This specification establishes the IANA JSON Web Token Claims
   registry for JWT Claim Names.  The registry records the Claim Name



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   and a reference to the specification that defines it.  This
   specification registers the Claim Names defined in <a href="#section-4.1">Section 4.1</a>.

   Values are registered on a Specification Required [<a href="/doc/html/rfc5226" title="">RFC5226</a>] basis
   after a three-week review period on the jwt-reg-review@ietf.org
   mailing list, on the advice of one or more Designated Experts.
   However, to allow for the allocation of values prior to publication,
   the Designated Expert(s) may approve registration once they are
   satisfied that such a specification will be published.

   Registration requests must be sent to the jwt-reg-review@ietf.org
   mailing list for review and comment, with an appropriate subject
   (e.g., "Request to register claim: example").

   Within the review period, the Designated Expert(s) will either
   approve or deny the registration request, communicating this decision
   to the review list and IANA.  Denials should include an explanation
   and, if applicable, suggestions as to how to make the request
   successful.  Registration requests that are undetermined for a period
   longer than 21 days can be brought to the IESG's attention (using the
   iesg@ietf.org mailing list) for resolution.

   Criteria that should be applied by the Designated Expert(s) includes
   determining whether the proposed registration duplicates existing
   functionality, determining whether it is likely to be of general
   applicability or whether it is useful only for a single application,
   and whether the registration description is clear.

   IANA must only accept registry updates from the Designated Expert(s)
   and should direct all requests for registration to the review mailing
   list.

   It is suggested that multiple Designated Experts be appointed who are
   able to represent the perspectives of different applications using
   this specification, in order to enable broadly-informed review of
   registration decisions.  In cases where a registration decision could
   be perceived as creating a conflict of interest for a particular
   Expert, that Expert should defer to the judgment of the other
   Expert(s).

   [[ Note to the RFC Editor and IANA: Pearl Liang of ICANN had
   requested that the draft supply the following proposed registry
   description information.

   o  Protocol Category: JSON Web Token (JWT)

   o  Registry Location: <a href="http://www.iana.org/assignments/jwt">http://www.iana.org/assignments/jwt</a>




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Webpage Title: (same as the protocol category)

   o  Registry Name: JSON Web Token Claims

   ]]

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.1.1.%20%20Registration%20Template"></a></body></html><a class="selflink" href="#section-10.1.1" id="section-10.1.1">10.1.1</a>.  Registration Template</span>

   Claim Name:
      The name requested (e.g., "iss").  Because a core goal of this
      specification is for the resulting representations to be compact,
      it is <em>RECOMMENDED</em> that the name be short -- not to exceed 8
      characters without a compelling reason to do so.  This name is
      case-sensitive.  Names may not match other registered names in a
      case-insensitive manner unless the Designated Expert(s) state that
      there is a compelling reason to allow an exception in this
      particular case.

   Claim Description:
      Brief description of the Claim (e.g., "Issuer").

   Change Controller:
      For Standards Track RFCs, state "IESG".  For others, give the name
      of the responsible party.  Other details (e.g., postal address,
      email address, home page URI) may also be included.

   Specification Document(s):
      Reference to the document(s) that specify the parameter,
      preferably including URI(s) that can be used to retrieve copies of
      the document(s).  An indication of the relevant sections may also
      be included but is not required.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.1.2.%20%20Initial%20Registry%20Contents"></a></body></html><a class="selflink" href="#section-10.1.2" id="section-10.1.2">10.1.2</a>.  Initial Registry Contents</span>

   o  Claim Name: "iss"
   o  Claim Description: Issuer
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.1">Section 4.1.1</a> of [[ this document ]]

   o  Claim Name: "sub"
   o  Claim Description: Subject
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.2">Section 4.1.2</a> of [[ this document ]]

   o  Claim Name: "aud"
   o  Claim Description: Audience





<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.3">Section 4.1.3</a> of [[ this document ]]

   o  Claim Name: "exp"
   o  Claim Description: Expiration Time
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.4">Section 4.1.4</a> of [[ this document ]]

   o  Claim Name: "nbf"
   o  Claim Description: Not Before
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.5">Section 4.1.5</a> of [[ this document ]]

   o  Claim Name: "iat"
   o  Claim Description: Issued At
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.6">Section 4.1.6</a> of [[ this document ]]

   o  Claim Name: "jti"
   o  Claim Description: JWT ID
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.7">Section 4.1.7</a> of [[ this document ]]

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.2.%20%20Sub-Namespace%20Registration%20of"></a></body></html><a class="selflink" href="#section-10.2" id="section-10.2">10.2</a>.  Sub-Namespace Registration of</span>
<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/%20%20%20%20%20%20%20urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Ajwt"></a></body></html>       urn:ietf:params:oauth:token-type:jwt</span>

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.2.1.%20%20Registry%20Contents"></a></body></html><a class="selflink" href="#section-10.2.1" id="section-10.2.1">10.2.1</a>.  Registry Contents</span>

   This specification registers the value "token-type:jwt" in the IANA
   urn:ietf:params:oauth registry established in An IETF URN Sub-
   Namespace for OAuth [<a href="/doc/html/rfc6755" title='"An IETF URN Sub-Namespace for OAuth"'>RFC6755</a>], which can be used to indicate that the
   content is a JWT.

   o  URN: urn:ietf:params:oauth:token-type:jwt
   o  Common Name: JSON Web Token (JWT) Token Type
   o  Change Controller: IESG
   o  Specification Document(s): [[this document]]

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.3.%20%20Media%20Type%20Registration"></a></body></html><a class="selflink" href="#section-10.3" id="section-10.3">10.3</a>.  Media Type Registration</span>

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.3.1.%20%20Registry%20Contents"></a></body></html><a class="selflink" href="#section-10.3.1" id="section-10.3.1">10.3.1</a>.  Registry Contents</span>

   This specification registers the "application/jwt" Media Type
   [<a href="/doc/html/rfc2046" title='"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"'>RFC2046</a>] in the MIME Media Types registry [<a href="#ref-IANA.MediaTypes">IANA.MediaTypes</a>] in the
   manner described in <a href="/doc/html/rfc6838">RFC 6838</a> [<a href="/doc/html/rfc6838" title='"Media Type Specifications and Registration Procedures"'>RFC6838</a>], which can be used to indicate
   that the content is a JWT.





<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Type Name: application
   o  Subtype Name: jwt
   o  Required Parameters: n/a
   o  Optional Parameters: n/a
   o  Encoding considerations: 8bit; JWT values are encoded as a series
      of base64url encoded values (some of which may be the empty
      string) separated by period ('.') characters.
   o  Security Considerations: See the Security Considerations section
      of [[ this document ]]
   o  Interoperability Considerations: n/a
   o  Published Specification: [[ this document ]]
   o  Applications that use this media type: OpenID Connect, Mozilla
      Persona, Salesforce, Google, Android, Windows Azure, Amazon Web
      Services, and numerous others
   o  Fragment identifier considerations: n/a
   o  Additional Information: Magic number(s): n/a, File extension(s):
      n/a, Macintosh file type code(s): n/a
   o  Person &amp; email address to contact for further information: Michael
      B. Jones, mbj@microsoft.com
   o  Intended Usage: COMMON
   o  Restrictions on Usage: none
   o  Author: Michael B. Jones, mbj@microsoft.com
   o  Change Controller: IESG
   o  Provisional registration?  No

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.4.%20%20Header%20Parameter%20Names%20Registration"></a></body></html><a class="selflink" href="#section-10.4" id="section-10.4">10.4</a>.  Header Parameter Names Registration</span>

   This specification registers specific Claim Names defined in
   <a href="#section-4.1">Section 4.1</a> in the IANA JSON Web Signature and Encryption Header
   Parameters registry defined in [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] for use by Claims replicated as
   Header Parameters in JWEs, per <a href="#section-5.3">Section 5.3</a>.

<span class="h4"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/10.4.1.%20%20Registry%20Contents"></a></body></html><a class="selflink" href="#section-10.4.1" id="section-10.4.1">10.4.1</a>.  Registry Contents</span>

   o  Header Parameter Name: "iss"
   o  Header Parameter Description: Issuer
   o  Header Parameter Usage Location(s): JWE
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.1">Section 4.1.1</a> of [[ this document ]]

   o  Header Parameter Name: "sub"
   o  Header Parameter Description: Subject
   o  Header Parameter Usage Location(s): JWE
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.2">Section 4.1.2</a> of [[ this document ]]






<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Header Parameter Name: "aud"
   o  Header Parameter Description: Audience
   o  Header Parameter Usage Location(s): JWE
   o  Change Controller: IESG
   o  Specification Document(s): <a href="#section-4.1.3">Section 4.1.3</a> of [[ this document ]]


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/11.%20%20Security%20Considerations"></a></body></html><a class="selflink" href="#section-11" id="section-11">11</a>.  Security Considerations</span>

   All of the security issues that are pertinent to any cryptographic
   application must be addressed by JWT/JWS/JWE/JWK agents.  Among these
   issues are protecting the user's asymmetric private and symmetric
   secret keys and employing countermeasures to various attacks.

   All the security considerations in the JWS specification also apply
   to JWT, as do the JWE security considerations when encryption is
   employed.  In particular, the JWS JSON Security Considerations and
   Unicode Comparison Security Considerations apply equally to the JWT
   Claims Set in the same manner that they do to the JOSE Header.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/11.1.%20%20Trust%20Decisions"></a></body></html><a class="selflink" href="#section-11.1" id="section-11.1">11.1</a>.  Trust Decisions</span>

   The contents of a JWT cannot be relied upon in a trust decision
   unless its contents have been cryptographically secured and bound to
   the context necessary for the trust decision.  In particular, the
   key(s) used to sign and/or encrypt the JWT will typically need to
   verifiably be under the control of the party identified as the issuer
   of the JWT.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/11.2.%20%20Signing%20and%20Encryption%20Order"></a></body></html><a class="selflink" href="#section-11.2" id="section-11.2">11.2</a>.  Signing and Encryption Order</span>

   While syntactically the signing and encryption operations for Nested
   JWTs may be applied in any order, if both signing and encryption are
   necessary, normally producers should sign the message and then
   encrypt the result (thus encrypting the signature).  This prevents
   attacks in which the signature is stripped, leaving just an encrypted
   message, as well as providing privacy for the signer.  Furthermore,
   signatures over encrypted text are not considered valid in many
   jurisdictions.

   Note that potential concerns about security issues related to the
   order of signing and encryption operations are already addressed by
   the underlying JWS and JWE specifications; in particular, because JWE
   only supports the use of authenticated encryption algorithms,
   cryptographic concerns about the potential need to sign after
   encryption that apply in many contexts do not apply to this
   specification.




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/12.%20%20Privacy%20Considerations"></a></body></html><a class="selflink" href="#section-12" id="section-12">12</a>.  Privacy Considerations</span>

   A JWT may contain privacy-sensitive information.  When this is the
   case, measures <em>MUST</em> be taken to prevent disclosure of this
   information to unintended parties.  One way to achieve this is to use
   an encrypted JWT and authenticate the recipient.  Another way is to
   ensure that JWTs containing unencrypted privacy-sensitive information
   are only transmitted using protocols utilizing encryption that
   support endpoint authentication, such as TLS.  Omitting privacy-
   sensitive information from a JWT is the simplest way of minimizing
   privacy issues.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/13.%20%20References"></a></body></html><a class="selflink" href="#section-13" id="section-13">13</a>.  References</span>

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/13.1.%20%20Normative%20References"></a></body></html><a class="selflink" href="#section-13.1" id="section-13.1">13.1</a>.  Normative References</span>

   [<a id="ref-ECMAScript">ECMAScript</a>]
              Ecma International, "ECMAScript Language Specification,
              5.1 Edition", ECMA 262, June 2011.

   [<a id="ref-IANA.MediaTypes">IANA.MediaTypes</a>]
              Internet Assigned Numbers Authority (IANA), "MIME Media
              Types", 2005.

   [<a id="ref-JWA">JWA</a>]      Jones, M., "JSON Web Algorithms (JWA)",
              <a href="/doc/html/draft-ietf-jose-json-web-algorithms">draft-ietf-jose-json-web-algorithms</a> (work in progress),
              December 2014.

   [<a id="ref-JWE">JWE</a>]      Jones, M. and J. Hildebrand, "JSON Web Encryption (JWE)",
              <a href="/doc/html/draft-ietf-jose-json-web-encryption">draft-ietf-jose-json-web-encryption</a> (work in progress),
              December 2014.

   [<a id="ref-JWS">JWS</a>]      Jones, M., Bradley, J., and N. Sakimura, "JSON Web
              Signature (JWS)", <a href="/doc/html/draft-ietf-jose-json-web-signature">draft-ietf-jose-json-web-signature</a> (work
              in progress), December 2014.

   [<a id="ref-RFC20">RFC20</a>]    Cerf, V., "ASCII format for Network Interchange", <a href="/doc/html/rfc20">RFC 20</a>,
              October 1969.

   [<a id="ref-RFC2046">RFC2046</a>]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
              Extensions (MIME) Part Two: Media Types", <a href="/doc/html/rfc2046">RFC 2046</a>,
              November 1996.

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3986">RFC3986</a>]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


              Resource Identifier (URI): Generic Syntax", STD 66,
              <a href="/doc/html/rfc3986">RFC 3986</a>, January 2005.

   [<a id="ref-RFC4949">RFC4949</a>]  Shirey, R., "Internet Security Glossary, Version 2",
              <a href="/doc/html/rfc4949">RFC 4949</a>, August 2007.

   [<a id="ref-RFC7159">RFC7159</a>]  Bray, T., "The JavaScript Object Notation (JSON) Data
              Interchange Format", <a href="/doc/html/rfc7159">RFC 7159</a>, March 2014.

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/13.2.%20%20Informative%20References"></a></body></html><a class="selflink" href="#section-13.2" id="section-13.2">13.2</a>.  Informative References</span>

   [<a id="ref-CanvasApp">CanvasApp</a>]
              Facebook, "Canvas Applications", 2010.

   [<a id="ref-JSS">JSS</a>]      Bradley, J. and N. Sakimura (editor), "JSON Simple Sign",
              September 2010.

   [<a id="ref-MagicSignatures">MagicSignatures</a>]
              Panzer (editor), J., Laurie, B., and D. Balfanz, "Magic
              Signatures", January 2011.

   [<a id="ref-OASIS.saml-core-2.0-os">OASIS.saml-core-2.0-os</a>]
              Cantor, S., Kemp, J., Philpott, R., and E. Maler,
              "Assertions and Protocol for the OASIS Security Assertion
              Markup Language (SAML) V2.0", OASIS Standard saml-core-
              2.0-os, March 2005.

   [<a id="ref-POSIX.1">POSIX.1</a>]  Institute of Electrical and Electronics Engineers, "The
              Open Group Base Specifications Issue 7", IEEE Std 1003.1,
              2013 Edition, 2013.

   [<a id="ref-RFC3275">RFC3275</a>]  Eastlake, D., Reagle, J., and D. Solo, "(Extensible Markup
              Language) XML-Signature Syntax and Processing", <a href="/doc/html/rfc3275">RFC 3275</a>,
              March 2002.

   [<a id="ref-RFC3339">RFC3339</a>]  Klyne, G., Ed. and C. Newman, "Date and Time on the
              Internet: Timestamps", <a href="/doc/html/rfc3339">RFC 3339</a>, July 2002.

   [<a id="ref-RFC4122">RFC4122</a>]  Leach, P., Mealling, M., and R. Salz, "A Universally
              Unique IDentifier (UUID) URN Namespace", <a href="/doc/html/rfc4122">RFC 4122</a>,
              July 2005.

   [<a id="ref-RFC5226">RFC5226</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="/doc/html/bcp26">BCP 26</a>, <a href="/doc/html/rfc5226">RFC 5226</a>,
              May 2008.

   [<a id="ref-RFC6755">RFC6755</a>]  Campbell, B. and H. Tschofenig, "An IETF URN Sub-Namespace
              for OAuth", <a href="/doc/html/rfc6755">RFC 6755</a>, October 2012.



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   [<a id="ref-RFC6838">RFC6838</a>]  Freed, N., Klensin, J., and T. Hansen, "Media Type
              Specifications and Registration Procedures", <a href="/doc/html/bcp13">BCP 13</a>,
              <a href="/doc/html/rfc6838">RFC 6838</a>, January 2013.

   [<a id="ref-SWT">SWT</a>]      Hardt, D. and Y. Goland, "Simple Web Token (SWT)",
              Version 0.9.5.1, November 2009.

   [<a id="ref-W3C.CR-xml11-20021015">W3C.CR-xml11-20021015</a>]
              Cowan, J., "Extensible Markup Language (XML) 1.1", W3C
              CR CR-xml11-20021015, October 2002.

   [<a id="ref-W3C.REC-xml-c14n-20010315">W3C.REC-xml-c14n-20010315</a>]
              Boyer, J., "Canonical XML Version 1.0", World Wide Web
              Consortium Recommendation REC-xml-c14n-20010315,
              March 2001,
              &lt;<a href="http://www.w3.org/TR/2001/REC-xml-c14n-20010315">http://www.w3.org/TR/2001/REC-xml-c14n-20010315</a>&gt;.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/Appendix%20A.%20%20JWT%20Examples"></a></body></html><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  JWT Examples</span>

   This section contains examples of JWTs.  For other example JWTs, see
   <a href="#section-6.1">Section 6.1</a> and Appendices A.1, A.2, and A.3 of [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>].

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/A.1.%20%20Example%20Encrypted%20JWT"></a></body></html><a class="selflink" href="#appendix-A.1" id="appendix-A.1">A.1</a>.  Example Encrypted JWT</span>

   This example encrypts the same claims as used in <a href="#section-3.1">Section 3.1</a> to the
   recipient using RSAES-PKCS1-V1_5 and AES_128_CBC_HMAC_SHA_256.

   The following example JOSE Header declares that:

   o  The Content Encryption Key is encrypted to the recipient using the
      RSAES-PKCS1-V1_5 algorithm to produce the JWE Encrypted Key.

   o  Authenticated encryption is performed on the Plaintext using the
      AES_128_CBC_HMAC_SHA_256 algorithm to produce the JWE Ciphertext
      and the JWE Authentication Tag.


     {"alg":"RSA1_5","enc":"A128CBC-HS256"}

   Other than using the octets of the UTF-8 representation of the JWT
   Claims Set from <a href="#section-3.1">Section 3.1</a> as the plaintext value, the computation
   of this JWT is identical to the computation of the JWE in <a href="#appendix-A.2">Appendix</a>
   <a href="#appendix-A.2">A.2</a> of [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>], including the keys used.

   The final result in this example (with line breaks for display
   purposes only) is:




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 24]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-25"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


     eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0.
     QR1Owv2ug2WyPBnbQrRARTeEk9kDO2w8qDcjiHnSJflSdv1iNqhWXaKH4MqAkQtM
     oNfABIPJaZm0HaA415sv3aeuBWnD8J-Ui7Ah6cWafs3ZwwFKDFUUsWHSK-IPKxLG
     TkND09XyjORj_CHAgOPJ-Sd8ONQRnJvWn_hXV1BNMHzUjPyYwEsRhDhzjAD26ima
     sOTsgruobpYGoQcXUwFDn7moXPRfDE8-NoQX7N7ZYMmpUDkR-Cx9obNGwJQ3nM52
     YCitxoQVPzjbl7WBuB7AohdBoZOdZ24WlN1lVIeh8v1K4krB8xgKvRU8kgFrEn_a
     1rZgN5TiysnmzTROF869lQ.
     AxY8DCtDaGlsbGljb3RoZQ.
     MKOle7UQrG6nSxTLX6Mqwt0orbHvAKeWnDYvpIAeZ72deHxz3roJDXQyhxx0wKaM
     HDjUEOKIwrtkHthpqEanSBNYHZgmNOV7sln1Eu9g3J8.
     fiK51VwhsxJ-siBMR-YFiA

<span class="h3"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/A.2.%20%20Example%20Nested%20JWT"></a></body></html><a class="selflink" href="#appendix-A.2" id="appendix-A.2">A.2</a>.  Example Nested JWT</span>

   This example shows how a JWT can be used as the payload of a JWE or
   JWS to create a Nested JWT.  In this case, the JWT Claims Set is
   first signed, and then encrypted.

   The inner signed JWT is identical to the example in <a href="#appendix-A.2">Appendix A.2</a> of
   [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>].  Therefore, its computation is not repeated here.  This
   example then encrypts this inner JWT to the recipient using RSAES-
   PKCS1-V1_5 and AES_128_CBC_HMAC_SHA_256.

   The following example JOSE Header declares that:

   o  The Content Encryption Key is encrypted to the recipient using the
      RSAES-PKCS1-V1_5 algorithm to produce the JWE Encrypted Key.

   o  Authenticated encryption is performed on the Plaintext using the
      AES_128_CBC_HMAC_SHA_256 algorithm to produce the JWE Ciphertext
      and the JWE Authentication Tag.

   o  The Plaintext is itself a JWT.


     {"alg":"RSA1_5","enc":"A128CBC-HS256","cty":"JWT"}

   Base64url encoding the octets of the UTF-8 representation of the JOSE
   Header yields this encoded JOSE Header value:

     eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiY3R5IjoiSldUIn0

   The computation of this JWT is identical to the computation of the
   JWE in <a href="#appendix-A.2">Appendix A.2</a> of [<a href="#ref-JWE" title='"JSON Web Encryption (JWE)"'>JWE</a>], other than that different JOSE Header,
   Plaintext, JWE Initialization Vector, and Content Encryption Key
   values are used.  (The RSA key used is the same.)

   The Payload used is the octets of the ASCII [<a href="/doc/html/rfc20" title='"ASCII format for Network Interchange"'>RFC20</a>] representation of



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 25]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-26"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   the JWT at the end of <a href="#appendix-A.2.1">Appendix A.2.1</a> of [<a href="#ref-JWS" title='"JSON Web Signature (JWS)"'>JWS</a>] (with all whitespace
   and line breaks removed), which is a sequence of 458 octets.

   The JWE Initialization Vector value used (using JSON array notation)
   is:

   [82, 101, 100, 109, 111, 110, 100, 32, 87, 65, 32, 57, 56, 48, 53,
   50]

   This example uses the Content Encryption Key represented by the
   base64url encoded value below:

     GawgguFyGrWKav7AX4VKUg

   The final result for this Nested JWT (with line breaks for display
   purposes only) is:

     eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiY3R5IjoiSldU
     In0.
     g_hEwksO1Ax8Qn7HoN-BVeBoa8FXe0kpyk_XdcSmxvcM5_P296JXXtoHISr_DD_M
     qewaQSH4dZOQHoUgKLeFly-9RI11TG-_Ge1bZFazBPwKC5lJ6OLANLMd0QSL4fYE
     b9ERe-epKYE3xb2jfY1AltHqBO-PM6j23Guj2yDKnFv6WO72tteVzm_2n17SBFvh
     DuR9a2nHTE67pe0XGBUS_TK7ecA-iVq5COeVdJR4U4VZGGlxRGPLRHvolVLEHx6D
     YyLpw30Ay9R6d68YCLi9FYTq3hIXPK_-dmPlOUlKvPr1GgJzRoeC9G5qCvdcHWsq
     JGTO_z3Wfo5zsqwkxruxwA.
     UmVkbW9uZCBXQSA5ODA1Mg.
     VwHERHPvCNcHHpTjkoigx3_ExK0Qc71RMEParpatm0X_qpg-w8kozSjfNIPPXiTB
     BLXR65CIPkFqz4l1Ae9w_uowKiwyi9acgVztAi-pSL8GQSXnaamh9kX1mdh3M_TT
     -FZGQFQsFhu0Z72gJKGdfGE-OE7hS1zuBD5oEUfk0Dmb0VzWEzpxxiSSBbBAzP10
     l56pPfAtrjEYw-7ygeMkwBl6Z_mLS6w6xUgKlvW6ULmkV-uLC4FUiyKECK4e3WZY
     Kw1bpgIqGYsw2v_grHjszJZ-_I5uM-9RA8ycX9KqPRp9gc6pXmoU_-27ATs9XCvr
     ZXUtK2902AUzqpeEUJYjWWxSNsS-r1TJ1I-FMJ4XyAiGrfmo9hQPcNBYxPz3GQb2
     8Y5CLSQfNgKSGt0A4isp1hBUXBHAndgtcslt7ZoQJaKe_nNJgNliWtWpJ_ebuOpE
     l8jdhehdccnRMIwAmU1n7SPkmhIl1HlSOpvcvDfhUN5wuqU955vOBvfkBOh5A11U
     zBuo2WlgZ6hYi9-e3w29bR0C2-pp3jbqxEDw3iWaf2dc5b-LnR0FEYXvI_tYk5rd
     _J9N0mg0tQ6RbpxNEMNoA9QWk5lgdPvbh9BaO195abQ.
     AVO9iT5AV4CzvDJCdhSFlQ


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/Appendix%20B.%20%20Relationship%20of%20JWTs%20to%20SAML%20Assertions"></a></body></html><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  Relationship of JWTs to SAML Assertions</span>

   SAML 2.0 [<a href="#ref-OASIS.saml-core-2.0-os">OASIS.saml-core-2.0-os</a>] provides a standard for creating
   security tokens with greater expressivity and more security options
   than supported by JWTs.  However, the cost of this flexibility and
   expressiveness is both size and complexity.  SAML's use of XML
   [<a href="#ref-W3C.CR-xml11-20021015">W3C.CR-xml11-20021015</a>] and XML DSIG [<a href="/doc/html/rfc3275" title='"(Extensible Markup Language) XML-Signature Syntax and Processing"'>RFC3275</a>] contributes to the
   size of SAML assertions; its use of XML and especially XML
   Canonicalization [<a href="#ref-W3C.REC-xml-c14n-20010315">W3C.REC-xml-c14n-20010315</a>] contributes to their



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 26]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-27"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   complexity.

   JWTs are intended to provide a simple security token format that is
   small enough to fit into HTTP headers and query arguments in URIs.
   It does this by supporting a much simpler token model than SAML and
   using the JSON [<a href="/doc/html/rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>] object encoding syntax.  It also supports
   securing tokens using Message Authentication Codes (MACs) and digital
   signatures using a smaller (and less flexible) format than XML DSIG.

   Therefore, while JWTs can do some of the things SAML assertions do,
   JWTs are not intended as a full replacement for SAML assertions, but
   rather as a token format to be used when ease of implementation or
   compactness are considerations.

   SAML Assertions are always statements made by an entity about a
   subject.  JWTs are often used in the same manner, with the entity
   making the statements being represented by the "iss" (issuer) claim,
   and the subject being represented by the "sub" (subject) claim.
   However, with these claims being optional, other uses of the JWT
   format are also permitted.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/Appendix%20C.%20%20Relationship%20of%20JWTs%20to%20Simple%20Web%20Tokens%20%28SWTs%29"></a></body></html><a class="selflink" href="#appendix-C" id="appendix-C">Appendix C</a>.  Relationship of JWTs to Simple Web Tokens (SWTs)</span>

   Both JWTs and Simple Web Tokens SWT [<a href="#ref-SWT" title='"Simple Web Token (SWT)"'>SWT</a>], at their core, enable sets
   of claims to be communicated between applications.  For SWTs, both
   the claim names and claim values are strings.  For JWTs, while claim
   names are strings, claim values can be any JSON type.  Both token
   types offer cryptographic protection of their content: SWTs with HMAC
   SHA-256 and JWTs with a choice of algorithms, including signature,
   MAC, and encryption algorithms.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/Appendix%20D.%20%20Acknowledgements"></a></body></html><a class="selflink" href="#appendix-D" id="appendix-D">Appendix D</a>.  Acknowledgements</span>

   The authors acknowledge that the design of JWTs was intentionally
   influenced by the design and simplicity of Simple Web Tokens [<a href="#ref-SWT" title='"Simple Web Token (SWT)"'>SWT</a>]
   and ideas for JSON tokens that Dick Hardt discussed within the OpenID
   community.

   Solutions for signing JSON content were previously explored by Magic
   Signatures [<a href="#ref-MagicSignatures">MagicSignatures</a>], JSON Simple Sign [<a href="#ref-JSS" title='"JSON Simple Sign"'>JSS</a>], and Canvas
   Applications [<a href="#ref-CanvasApp">CanvasApp</a>], all of which influenced this draft.

   This specification is the work of the OAuth Working Group, which
   includes dozens of active and dedicated participants.  In particular,
   the following individuals contributed ideas, feedback, and wording
   that influenced this specification:



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 27]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-28"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   Dirk Balfanz, Richard Barnes, Brian Campbell, Alissa Cooper, Breno de
   Medeiros, Stephen Farrell, Dick Hardt, Joe Hildebrand, Jeff Hodges,
   Edmund Jay, Yaron Y. Goland, Warren Kumari, Ben Laurie, Barry Leiba,
   Ted Lemon, James Manger, Prateek Mishra, Kathleen Moriarty, Tony
   Nadalin, Axel Nennker, John Panzer, Emmanuel Raviart, David Recordon,
   Eric Rescorla, Jim Schaad, Paul Tarjan, Hannes Tschofenig, Sean
   Turner, and Tom Yu.

   Hannes Tschofenig and Derek Atkins chaired the OAuth working group
   and Sean Turner, Stephen Farrell, and Kathleen Moriarty served as
   Security area directors during the creation of this specification.


<span class="h2"><html><body><a class="dashAnchor" name="//apple_ref/cpp/Shortcut/Appendix%20E.%20%20Document%20History"></a></body></html><a class="selflink" href="#appendix-E" id="appendix-E">Appendix E</a>.  Document History</span>

   [[ to be removed by the RFC Editor before publication as an RFC ]]

   -32

   o  Replaced uses of the phrases "JWS object" and "JWE object" with
      "JWS" and "JWE".

   o  Applied other minor editorial improvements.

   -31

   o  Updated the example IANA registration request subject line.

   -30

   o  Applied privacy wording supplied by Stephen Farrell.

   o  Clarified where white space and line breaks may occur in JSON
      objects by referencing <a href="/doc/html/rfc7159#section-2">Section 2 of RFC 7159</a>.

   o  Specified that registration reviews occur on the
      jwt-reg-review@ietf.org mailing list.

   -29

   o  Used real values for examples in the IANA Registration Template.

   -28

   o  Addressed IESG review comments by Alissa Cooper, Barry Leiba,
      Stephen Farrell, Ted Lemon, and Richard Barnes.





<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 28]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-29"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Changed the <a href="/doc/html/rfc6755">RFC 6755</a> reference to be informative, based upon
      related IESG review feedback on <a href="/doc/html/draft-ietf-oauth-saml2-bearer">draft-ietf-oauth-saml2-bearer</a>.

   -27

   o  Removed unused reference to <a href="/doc/html/rfc4648">RFC 4648</a>.

   o  Changed to use the term "authenticated encryption" instead of
      "encryption", where appropriate.

   o  Changed the registration review period to three weeks.

   o  Acknowledged additional contributors.

   -26

   o  Removed an ambiguity in numeric date representations by specifying
      that leap seconds are handled in the manner specified by POSIX.1.

   o  Addressed Gen-ART review comments by Russ Housley.

   o  Addressed secdir review comments by Warren Kumari and Stephen
      Kent.

   o  Replaced the terms Plaintext JWS and Plaintext JWT with Unsecured
      JWS and Unsecured JWT.

   -25

   o  Reworded the language about JWT implementations ignoring the "typ"
      parameter, explicitly saying that its processing is performed by
      JWT applications.

   o  Added a Privacy Considerations section.

   -24

   o  Cleaned up the reference syntax in a few places.

   o  Applied minor wording changes to the Security Considerations
      section.

   -23

   o  Replaced the terms JWS Header, JWE Header, and JWT Header with a
      single JOSE Header term defined in the JWS specification.  This
      also enabled a single Header Parameter definition to be used and
      reduced other areas of duplication between specifications.



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 29]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-30"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   -22

   o  Revised the introduction to the Security Considerations section.
      Also introduced subsection headings for security considerations
      items.

   o  Added text about when applications typically would and would not
      use the "typ" header parameter.

   -21

   o  Removed unnecessary informative JWK spec reference.

   -20

   o  Changed the <a href="/doc/html/rfc6755">RFC 6755</a> reference to be normative.

   o  Changed the JWK reference to be informative.

   o  Described potential sources of ambiguity in representing the JSON
      objects used in the examples.  The octets of the actual UTF-8
      representations of the JSON objects used in the examples are
      included to remove these ambiguities.

   o  Noted that octet sequences are depicted using JSON array notation.

   -19

   o  Specified that support for Nested JWTs is optional and that
      applications using this specification can impose additional
      requirements upon implementations that they use.

   o  Updated the JSON reference to <a href="/doc/html/rfc7159">RFC 7159</a>.

   -18

   o  Clarified that the base64url encoding includes no line breaks,
      white space, or other additional characters.

   o  Removed circularity in the audience claim definition.

   o  Clarified that it is entirely up to applications which claims to
      use.

   o  Changed "<em>SHOULD</em>" to "<em>MUST</em>" in "in the absence of such
      requirements, all claims that are not understood by
      implementations <em>MUST</em> be ignored".




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 30]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-31"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Clarified that applications can define their own processing rules
      for claims replicated in header parameters, rather than always
      requiring that they be identical in the JWT Header and JWT Claims
      Set.

   o  Removed a JWT creation step that duplicated a step in the
      underlying JWS or JWE creation.

   o  Added security considerations about using JWTs in trust decisions.

   -17

   o  Corrected <a href="/doc/html/rfc2119">RFC 2119</a> terminology usage.

   o  Replaced references to <a href="/doc/html/draft-ietf-json-rfc4627bis">draft-ietf-json-rfc4627bis</a> with <a href="/doc/html/rfc7158">RFC 7158</a>.

   -16

   o  Changed some references from being normative to informative, per
      JOSE issue #90.

   -15

   o  Replaced references to <a href="/doc/html/rfc4627">RFC 4627</a> with <a href="/doc/html/draft-ietf-json-rfc4627bis">draft-ietf-json-rfc4627bis</a>.

   -14

   o  Referenced the JWE section on Distinguishing between JWS and JWE
      Objects.

   -13

   o  Added Claim Description registry field.

   o  Used Header Parameter Description registry field.

   o  Removed the phrases "JWA signing algorithms" and "JWA encryption
      algorithms".

   o  Removed the term JSON Text Object.

   -12

   o  Tracked the JOSE change refining the "typ" and "cty" definitions
      to always be MIME Media Types, with the omission of "application/"
      prefixes recommended for brevity.  For compatibility with legacy
      implementations, it is <em>RECOMMENDED</em> that "JWT" always be spelled
      using uppercase characters when used as a "typ" or "cty" value.



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 31]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-32"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


      As side effects, this change removed the "typ" Claim definition
      and narrowed the uses of the URI
      "urn:ietf:params:oauth:token-type:jwt".

   o  Updated base64url definition to match JOSE definition.

   o  Changed terminology from "Reserved Claim Name" to "Registered
      Claim Name" to match JOSE terminology change.

   o  Applied other editorial changes to track parallel JOSE changes.

   o  Clarified that the subject value may be scoped to be locally
      unique in the context of the issuer or may be globally unique.

   -11

   o  Added a Nested JWT example.

   o  Added "sub" to the list of Claims registered for use as Header
      Parameter values when an unencrypted representation is required in
      an encrypted JWT.

   -10

   o  Allowed Claims to be replicated as Header Parameters in encrypted
      JWTs as needed by applications that require an unencrypted
      representation of specific Claims.

   -09

   o  Clarified that the "typ" header parameter is used in an
      application-specific manner and has no effect upon the JWT
      processing.

   o  Stated that recipients <em>MUST</em> either reject JWTs with duplicate
      Header Parameter Names or with duplicate Claim Names or use a JSON
      parser that returns only the lexically last duplicate member name.

   -08

   o  Tracked a change to how JWEs are computed (which only affected the
      example encrypted JWT value).

   -07

   o  Defined that the default action for claims that are not understood
      is to ignore them unless otherwise specified by applications.




<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 32]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-33"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


   o  Changed from using the term "byte" to "octet" when referring to 8
      bit values.

   o  Tracked encryption computation changes in the JWE specification.

   -06

   o  Changed the name of the "prn" claim to "sub" (subject) both to
      more closely align with SAML name usage and to use a more
      intuitive name.

   o  Allow JWTs to have multiple audiences.

   o  Applied editorial improvements suggested by Jeff Hodges, Prateek
      Mishra, and Hannes Tschofenig.  Many of these simplified the
      terminology used.

   o  Explained why Nested JWTs should be signed and then encrypted.

   o  Clarified statements of the form "This claim is <em>OPTIONAL</em>" to "Use
      of this claim is <em>OPTIONAL</em>".

   o  Referenced String Comparison Rules in JWS.

   o  Added seriesInfo information to Internet Draft references.

   -05

   o  Updated values for example AES CBC calculations.

   -04

   o  Promoted Initialization Vector from being a header parameter to
      being a top-level JWE element.  This saves approximately 16 bytes
      in the compact serialization, which is a significant savings for
      some use cases.  Promoting the Initialization Vector out of the
      header also avoids repeating this shared value in the JSON
      serialization.

   o  Applied changes made by the RFC Editor to <a href="/doc/html/rfc6749">RFC 6749</a>'s registry
      language to this specification.

   o  Reference <a href="/doc/html/rfc6755">RFC 6755</a> -- An IETF URN Sub-Namespace for OAuth.

   -03

   o  Added statement that "StringOrURI values are compared as case-
      sensitive strings with no transformations or canonicalizations



<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 33]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-34"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


      applied".

   o  Indented artwork elements to better distinguish them from the body
      text.

   -02

   o  Added an example of an encrypted JWT.

   o  Added this language to Registration Templates: "This name is case
      sensitive.  Names that match other registered names in a case
      insensitive manner <em>SHOULD NOT</em> be accepted."

   o  Applied editorial suggestions.

   -01

   o  Added the "cty" (content type) header parameter for declaring type
      information about the secured content, as opposed to the "typ"
      (type) header parameter, which declares type information about
      this object.  This significantly simplified nested JWTs.

   o  Moved description of how to determine whether a header is for a
      JWS or a JWE from the JWT spec to the JWE spec.

   o  Changed registration requirements from RFC Required to
      Specification Required with Expert Review.

   o  Added Registration Template sections for defined registries.

   o  Added Registry Contents sections to populate registry values.

   o  Added "Collision Resistant Namespace" to the terminology section.

   o  Numerous editorial improvements.

   -00

   o  Created the initial IETF draft based upon
      <a href="/doc/html/draft-jones-json-web-token-10">draft-jones-json-web-token-10</a> with no normative changes.











<span class="grey">Jones, et al.             Expires June 12, 2015                [Page 34]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-35"></span>
<span class="grey">Internet-Draft            JSON Web Token (JWT)             December 2014</span>


Authors' Addresses

   Michael B. Jones
   Microsoft

   Email: mbj@microsoft.com
   URI:   <a href="http://self-issued.info/">http://self-issued.info/</a>


   John Bradley
   Ping Identity

   Email: ve7jtb@ve7jtb.com
   URI:   <a href="http://www.thread-safe.com/">http://www.thread-safe.com/</a>


   Nat Sakimura
   Nomura Research Institute

   Email: n-sakimura@nri.co.jp
   URI:   <a href="http://nat.sakimura.org/">http://nat.sakimura.org/</a>






























Jones, et al.             Expires June 12, 2015                [Page 35]
</pre>
</div>
</div>
</div>
<script>$(".visible-nojs").removeClass("visible-nojs");</script>
<script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
<script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>
</body>
</html>
